{
  "version": 4,
  "terraform_version": "1.12.2",
  "serial": 5,
  "lineage": "3640892b-fa88-d52e-8c3a-93c807f97e7f",
  "outputs": {
    "argocd_admin_password": {
      "value": "$2a$10$XPPGUqt4zyXoEDlKNE.16.TZzbbzH0cb9CRaroeUkIgwPuXOwrZnq",
      "type": "string"
    },
    "argocd_server_url": {
      "value": "https://argocd.cryptoviz.epitech-msc2026.me",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "google_client_config",
      "name": "default",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_token": "ya29.c.c0ASRK0GbdG9AYxj3M66eKETNpvANla7NPxVskXEAishS0zGMtyCAoUnPezHctIrGytR4QVsGLYxTrZOLQbONzcE49BbQ1oiZt0S8pNSXviKFG9mIh-tp1GBWGkN9orR84ydhJKOcna_PJ4C4JIkUO7IDNIsOGNlFTOC6uUNfoUaRg_cJ02kViNlBmKugEhmhBZ4LcK8XVW5AYvo_gFMub5KTiqGCbY4HEvwSIiHgUXd-j1Q2Bx6adFHBuJl0UrPgXHD6IEXImJlLrlfHU33W4A1BwW1854LmK2j6UWt2aFIun32zqfEj3VB0FYE-6USnIvdipP1LhL1SuiE5D8vFo_E8RglyHMBUnLL0rit8CDvthI6KN3IF_e9ZOvAN387Aj73Q7VupIh0yxtQ-Ri_o60RbbFlp-jlQb6RsrZ-bmckvfXpooB3ld3pwjnfR8F7BIpwlJejeWrtxoWqZ3J1BVyw73_yWQW69cmt8dgkd_6S8yVedzVhz-wgF9-ZavQ1S45no75UIgaWzgnI4MyWBY5aJOe2R8fondSOjFBFMnjy-98Yrp19fFYrYQcp_0FtIUUmQMohRrptci-UwImw_QMVxdjp_qniWip7dhv6zoVJR3rUwgyfFjpkWjIezBfflo97s68vZhmFjg8cj8Ydsf-uSmxxXc7-S155k1wi1-2shQlXrZea4cYQQfmRg9g9MmypMQWZnq9b8YpzRptzn3f1iF0rBjptcWffygQd78BqhgOVFbRmZowfYodzlkyc7d-7mM6pQ4M7WzgJQJIdiwQ9ky9J8WWr-BfazXfvlFiVjUMU0J-ur7nVRe_hqBpM4wpOtJuR8n1o-r9ecfJ7Y9IwgpU7heq-Orh820pqnF4W2givuJFyafSvgyFWBI1e92uh5UspFuvF3nb8cJzVqmh5g_Xwu1UvtOrqnznBO0g_paU99hoJ714cmXztffiBtf79h6xUo8kd5W3MklId1mOQpSsi449Wry5iS1OxW1I5Ya2qcorgU20Bb",
            "default_labels": null,
            "id": "projects/\"magnetic-racer-476808-v4\"/regions/\"europe-west1\"/zones/\"europe-west1-a\"",
            "project": "magnetic-racer-476808-v4",
            "region": "europe-west1",
            "zone": "europe-west1-a"
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "access_token"
              }
            ]
          ],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "terraform_remote_state",
      "name": "cryptoviz_gke",
      "provider": "provider[\"terraform.io/builtin/terraform\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "backend": "local",
            "config": {
              "value": {
                "path": "../google_kubernetes_engine/terraform.tfstate"
              },
              "type": [
                "object",
                {
                  "path": "string"
                }
              ]
            },
            "defaults": null,
            "outputs": {
              "value": {
                "cluster_ca_certificate": "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVMRENDQXBTZ0F3SUJBZ0lRZGdWdGRjT0w1MzJZSzFaZnNCR2hKVEFOQmdrcWhraUc5dzBCQVFzRkFEQXYKTVMwd0t3WURWUVFERXlSbE5UZGxORFF3WWkweVptUXpMVFJrTkdFdFlUZzBPQzAxTTJFNU5tVTFaRFEyWXprdwpJQmNOTWpVeE1ETXhNVE13TXpJeldoZ1BNakExTlRFd01qUXhOREF6TWpOYU1DOHhMVEFyQmdOVkJBTVRKR1UxCk4yVTBOREJpTFRKbVpETXROR1EwWVMxaE9EUTRMVFV6WVRrMlpUVmtORFpqT1RDQ0FhSXdEUVlKS29aSWh2Y04KQVFFQkJRQURnZ0dQQURDQ0FZb0NnZ0dCQUxreUs5dEFEckJBRm9CVklINWlzZEtyd3lWdjhxeldwTlNxdmRBMQpnSlNGOFh6emxvVVhRQjR4NXRqekZKZFFEWDczQVFsLzhmQnlkd3gwcWFDQlAwQWtvdlEzSUs2aWw2MTNJbU05CmpmcnNTNVdvZzBxRlJVUjFCYWcwL1IvTXVSb0tOd0R3bXFrbk1wZTBlSU5CQ3Y5cVkrZC96amZEeGpzNE41ekIKL1ZJTmVhVGpVQjBON2lqeFNvREdyQmZ4M1FVR0J4TUsrTnZLZDN5MXNtbCtQbXFMS3RGL1gwdHZrRWZlY3B4QwpMcnE1RHlrbG5XWHcxamFGRm5FcUVFVG1sckdsclJCSUtnZkdBam1KamVBMW1La05IMHpOU0tNU2NoWlNmRkI3CjU3cEZGVWZ1MS9wQ2NhSndoVTM5dU1uaVVPK1VTcDZlWTJOWlh3R3U0QVdUL0pqZVMrazdBRFZneE02d29Xck4KYlJqdGcyZ3NBODkwaWRpYUROVnZ2dGZlNFg0enBJNmhROTh6aC9VS3ZCN2lKa3RpcC9hNzcxS04zZVNVWHM4WApxSXlLT3dRdUlpS1NIK3RPeG5nRGJtbC9ZOFJkMEJNYU04SStFSlhyS0xSNVZackhYTERMQnNvRkZIN3R1eUpCCitrS2V1bDZwdGxxRFhEOHNZRlVkbmZuNi93SURBUUFCbzBJd1FEQU9CZ05WSFE4QkFmOEVCQU1DQWdRd0R3WUQKVlIwVEFRSC9CQVV3QXdFQi96QWRCZ05WSFE0RUZnUVVPL3hMWUs2RUJRQWRaUG5VdHpLNE9CSTdRT293RFFZSgpLb1pJaHZjTkFRRUxCUUFEZ2dHQkFKOUZLWjdCOEt0cFQzaWozSFgvNkVrRXFTTmYyUmF0dWxKd2FPYXNZUE1nCkszQXdLME5hRnVoejA1bGtsSnRtUHhHOUF3UEFpSmFTcUtXRThGZTljRnRscXJ4VHV4NzYxK29hSWY2RS95WlkKL0liZ3BkTmpRK2JqaGV0SEl1Nkd1YU9KRFlKdHBFRHV2ejM0Sm0rRUt1RUxubk96RDA2dVRUVWlTdkRIZHE1TwpVNWcvaHRLeEJxSnpCRVJTWExZd0RySkRFTUxoZElBTitpZXN4YTFzcG9QVjM4bjdKbnRubFNoU28rTlV2WmxkCmREcW1POXg5dWY3Z0xHRnc4UW8zSnZZVWN6ZXVTaVhWQnMyVlBXb3h4dHpMaytsRjBadDgySEJuMFVld1pGODYKTHVxd1FFNjdWUDIvaTljVDZZQ1l5UlJEMDNua0RkS2V4U2FzcEgvZTNIbnhnK1l3YXYzc08wbVhlTVUreHRtVgpRL29QakVQMnZJai9iVTNjeDdxR2JvSUhDMHlCeVdpUjB1d1RGVWEveENpL2dlVlB3aENsMTlKLzBtaHRiSEVwCjZFUUxxZmlHc0FOazhsaXdwV0FmeEpjbmUvWTlQWGhrSStPZWJ3NENWbGVwaUo4aEJRRWJjM253aUtNMVFnV0MKaUcyUlVaYmU5KzhXalBYaEQ2b1pjdz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K",
                "cluster_endpoint": "34.14.76.194",
                "cluster_name": "cryptoviz"
              },
              "type": [
                "object",
                {
                  "cluster_ca_certificate": "string",
                  "cluster_endpoint": "string",
                  "cluster_name": "string"
                }
              ]
            },
            "workspace": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "module": "module.kubernetes_cluster",
      "mode": "data",
      "type": "kubernetes_secret",
      "name": "argocd_initial_admin_secret",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "binary_data": null,
            "data": {
              "admin.password": "$2a$10$XPPGUqt4zyXoEDlKNE.16.TZzbbzH0cb9CRaroeUkIgwPuXOwrZnq",
              "admin.passwordMtime": "2025-10-31T14:34:40Z",
              "server.secretkey": "V8lo+Dv6Bw4GenQd58C+U4Uabm552574RvPVsmb4efY="
            },
            "id": "argocd/argocd-secret",
            "immutable": false,
            "metadata": [
              {
                "annotations": {
                  "meta.helm.sh/release-name": "argocd",
                  "meta.helm.sh/release-namespace": "argocd"
                },
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/component": "server",
                  "app.kubernetes.io/instance": "argocd",
                  "app.kubernetes.io/managed-by": "Helm",
                  "app.kubernetes.io/name": "argocd-secret",
                  "app.kubernetes.io/part-of": "argocd",
                  "app.kubernetes.io/version": "v3.1.6",
                  "helm.sh/chart": "argo-cd-8.5.2"
                },
                "name": "argocd-secret",
                "namespace": "argocd",
                "resource_version": "1761921344042847016",
                "uid": "0a76beac-0d1d-473a-9c8f-d40d867f2456"
              }
            ],
            "type": "Opaque"
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "binary_data"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "data"
              }
            ]
          ],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "module": "module.kubernetes_cluster",
      "mode": "managed",
      "type": "helm_release",
      "name": "argocd",
      "provider": "provider[\"registry.terraform.io/hashicorp/helm\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "atomic": false,
            "chart": "argo-cd",
            "cleanup_on_fail": false,
            "create_namespace": false,
            "dependency_update": false,
            "description": null,
            "devel": null,
            "disable_crd_hooks": false,
            "disable_openapi_validation": false,
            "disable_webhooks": false,
            "force_update": false,
            "id": "argocd",
            "keyring": null,
            "lint": false,
            "manifest": null,
            "max_history": 0,
            "metadata": [
              {
                "app_version": "v3.1.6",
                "chart": "argo-cd",
                "first_deployed": 1761921280,
                "last_deployed": 1761921280,
                "name": "argocd",
                "namespace": "argocd",
                "notes": "\nIn order to access the server UI you have the following options:\n\n1. kubectl port-forward service/argocd-server -n argocd 8080:443\n\n    and then open the browser on http://localhost:8080 and accept the certificate\n\n2. enable ingress in the values file `server.ingress.enabled` and either\n      - Add the annotation for ssl passthrough: https://argo-cd.readthedocs.io/en/stable/operator-manual/ingress/#option-1-ssl-passthrough\n      - Set the `configs.params.\"server.insecure\"` in the values file and terminate SSL at your ingress: https://argo-cd.readthedocs.io/en/stable/operator-manual/ingress/#option-2-multiple-ingress-objects-and-hosts\n\n\nAfter reaching the UI the first time you can login with username: admin and the random password generated during the installation. You can find the password by running:\n\nkubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath=\"{.data.password}\" | base64 -d\n\n(You should delete the initial secret afterwards as suggested by the Getting Started Guide: https://argo-cd.readthedocs.io/en/stable/getting_started/#4-login-using-the-cli)\n\nRedis can be accessed via port 6379   and Sentinel can be accessed via port 26379    on the following DNS name from within your cluster:\nargocd-redis-ha.argocd.svc.cluster.local\n\nTo connect to your Redis server:\n1. To retrieve the redis password:\n   echo $(kubectl get secret argocd-redis-ha -o \"jsonpath={.data['auth']}\" | base64 --decode)\n\n2. Connect to the Redis master pod that you can use as a client. By default the argocd-redis-ha-server-0 pod is configured as the master:\n\n   kubectl exec -it argocd-redis-ha-server-0 -n argocd -c redis -- sh\n\n3. Connect using the Redis CLI (inside container):\n\n   redis-cli -a \u003cREDIS-PASS-FROM-SECRET\u003e\n",
                "revision": 1,
                "values": "{\"applicationSet\":{\"replicas\":2},\"configs\":{\"cm\":{\"policy\":{\"csv\":\"p, role:admin, applications, *, */*, allow\\np, role:admin, clusters, *, *, allow\\np, role:admin, repositories, *, *, allow\\np, role:admin, projects, *, *, allow\\ng, argocd-admins, role:admin\\n\",\"default\":\"role:readonly\"},\"repositories\":\"- url: https://github.com/cryptoviz/infrastructure/\\n  type: git\\n  name: argocd-apps\\n\",\"url\":\"http://localhost:8080\"},\"params\":{\"application.instanceLabelKey\":\"argocd.argoproj.io/instance\",\"server.insecure\":true},\"secret\":{\"argocdServerAdminPassword\":\"$2a$10$XPPGUqt4zyXoEDlKNE.16.TZzbbzH0cb9CRaroeUkIgwPuXOwrZnq\"}},\"controller\":{\"replicas\":1},\"crds\":{\"install\":true},\"global\":{\"domain\":\"argocd.cryptoviz.epitech-msc2026.me\"},\"redis-ha\":{\"enabled\":true},\"repoServer\":{\"autoscaling\":{\"enabled\":true,\"minReplicas\":2}},\"server\":{\"autoscaling\":{\"enabled\":true,\"minReplicas\":2},\"ingress\":{\"enabled\":false},\"metrics\":{\"enabled\":true},\"service\":{\"type\":\"ClusterIP\"}}}",
                "version": "8.5.2"
              }
            ],
            "name": "argocd",
            "namespace": "argocd",
            "pass_credentials": false,
            "postrender": [],
            "recreate_pods": false,
            "render_subchart_notes": true,
            "replace": false,
            "repository": "https://argoproj.github.io/argo-helm",
            "repository_ca_file": null,
            "repository_cert_file": null,
            "repository_key_file": null,
            "repository_password": null,
            "repository_username": null,
            "reset_values": false,
            "reuse_values": false,
            "set": [],
            "set_list": [],
            "set_sensitive": [],
            "skip_crds": false,
            "status": "deployed",
            "timeout": 600,
            "upgrade_install": null,
            "values": [
              "# https://github.com/argoproj/argo-helm/tree/main/charts/argo-cd\n\n## Custom resource configuration\ncrds:\n  # -- Install and upgrade CRDs\n  install: true\n\n####################################################################################################\n# High Availabilty mode with autoscaling\n####################################################################################################\nredis-ha:\n  enabled: true\n\ncontroller:\n  replicas: 1\n\nrepoServer:\n  autoscaling:\n    enabled: true\n    minReplicas: 2\n\napplicationSet:\n  replicas: 2\n\n## Globally shared configuration\nglobal:\n  # -- Default domain used by all components\n  ## Used for ingresses, certificates, SSO, notifications, etc.\n  domain: argocd.cryptoviz.epitech-msc2026.me\n\n## Argo Configs\nconfigs:\n  cm:\n    # Temporary URL (will be updated by the app of apps)\n    url: http://localhost:8080\n\n    repositories: |\n      - url: https://github.com/cryptoviz/infrastructure/\n        type: git\n        name: argocd-apps\n\n    # Minimal RBAC policy\n    policy:\n      default: role:readonly\n      csv: |\n        p, role:admin, applications, *, */*, allow\n        p, role:admin, clusters, *, *, allow\n        p, role:admin, repositories, *, *, allow\n        p, role:admin, projects, *, *, allow\n        g, argocd-admins, role:admin\n\n  params:\n    # Mode insecure for initial setup (to be changed later)\n    server.insecure: true\n    application.instanceLabelKey: argocd.argoproj.io/instance\n\n  secret:\n    argocdServerAdminPassword: $2a$10$XPPGUqt4zyXoEDlKNE.16.TZzbbzH0cb9CRaroeUkIgwPuXOwrZnq # bcrypt hash of the admin password\n\n\n\nserver:\n  service:\n    type: ClusterIP\n\n  ingress:\n    enabled: false # We'll use Istio Gateway\n\n  autoscaling:\n    enabled: true\n    minReplicas: 2\n\n  metrics:\n    enabled: true\n\n\n"
            ],
            "verify": false,
            "version": "8.5.2",
            "wait": true,
            "wait_for_jobs": true
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "repository_password"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "values"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              }
            ]
          ],
          "identity_schema_version": 0,
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.google_client_config.default",
            "data.terraform_remote_state.cryptoviz_gke",
            "module.kubernetes_cluster.kubernetes_namespace.argocd",
            "module.kubernetes_cluster.random_password.argocd_admin"
          ]
        }
      ]
    },
    {
      "module": "module.kubernetes_cluster",
      "mode": "managed",
      "type": "kubernetes_namespace",
      "name": "argocd",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "argocd",
            "metadata": [
              {
                "annotations": null,
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "name": "argocd"
                },
                "name": "argocd",
                "resource_version": "1761921277665631000",
                "uid": "ca5f5a54-f794-46aa-8c6c-db3e61ac1dff"
              }
            ],
            "timeouts": null,
            "wait_for_default_service_account": false
          },
          "sensitive_attributes": [],
          "identity_schema_version": 1,
          "identity": {
            "api_version": "v1",
            "kind": "Namespace",
            "name": "argocd"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjozMDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "data.google_client_config.default",
            "data.terraform_remote_state.cryptoviz_gke"
          ]
        }
      ]
    },
    {
      "module": "module.kubernetes_cluster",
      "mode": "managed",
      "type": "random_password",
      "name": "argocd_admin",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 3,
          "attributes": {
            "bcrypt_hash": "$2a$10$..JAzh9gkBwubIqg876.wuTFbd9wIW2bQ9f.VK.tdqMbQHAEL0Gx6",
            "id": "none",
            "keepers": null,
            "length": 16,
            "lower": true,
            "min_lower": 0,
            "min_numeric": 0,
            "min_special": 0,
            "min_upper": 0,
            "number": true,
            "numeric": true,
            "override_special": null,
            "result": "Oh]=VZUeY\u003cjv-+[n",
            "special": true,
            "upper": true
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "bcrypt_hash"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "result"
              }
            ]
          ],
          "identity_schema_version": 0
        }
      ]
    }
  ],
  "check_results": null
}
